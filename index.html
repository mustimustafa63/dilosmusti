<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Dilara'nƒ±n Evreni üåå</title>
    
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;500;800&family=Sacramento&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <style>
        :root {
            --bg: #050510;
            --accent: #ff0a43;
            --gold: #ffd700;
            --glass: rgba(20, 20, 30, 0.95);
        }

        * { box-sizing: border-box; margin: 0; padding: 0; user-select: none; -webkit-tap-highlight-color: transparent; }

        body {
            background-color: var(--bg);
            color: white;
            font-family: 'Montserrat', sans-serif;
            overflow: hidden; 
            width: 100vw; height: 100vh;
        }

        /* === CANEVAS === */
        canvas#universe {
            position: absolute; top: 0; left: 0;
            z-index: 1; cursor: grab;
        }
        canvas#universe:active { cursor: grabbing; }

        /* === UI OVERLAY === */
        #ui-layer {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            pointer-events: none; z-index: 10;
        }

        .instruction {
            position: absolute; bottom: 30px; left: 50%; transform: translateX(-50%);
            font-size: 0.8rem; opacity: 0.7; letter-spacing: 2px;
            animation: pulse 2s infinite; text-align: center; width: 100%;
            text-shadow: 0 0 10px black;
        }

        .reset-view {
            position: absolute; top: 20px; right: 20px;
            pointer-events: auto; background: rgba(255,255,255,0.1);
            padding: 10px 20px; border-radius: 20px; cursor: pointer;
            font-size: 0.8rem; border: 1px solid rgba(255,255,255,0.2);
        }

        /* === MODAL (CONTENU) === */
        #modal {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.6); backdrop-filter: blur(10px);
            z-index: 100;
            display: none; justify-content: center; align-items: center;
            opacity: 0; transition: opacity 0.3s ease;
        }
        #modal.active { display: flex; opacity: 1; pointer-events: auto; }

        .modal-card {
            background: linear-gradient(135deg, #1a1a2e, #16213e);
            border: 1px solid rgba(255,255,255,0.1);
            width: 90%; max-width: 500px; max-height: 85vh;
            border-radius: 25px;
            padding: 30px;
            position: relative;
            transform: scale(0.9); transition: transform 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            overflow-y: auto;
            box-shadow: 0 0 60px rgba(255, 10, 67, 0.15);
            text-align: center;
        }
        #modal.active .modal-card { transform: scale(1); }

        .close-btn {
            position: absolute; top: 15px; right: 15px;
            width: 35px; height: 35px; background: rgba(255,255,255,0.1);
            border-radius: 50%; display: flex; justify-content: center; align-items: center;
            cursor: pointer; transition: 0.3s; z-index: 10;
        }
        .close-btn:hover { background: var(--accent); transform: rotate(90deg); }

        /* === STYLES INTERNES AUX MODALES === */
        h2 { font-family: 'Sacramento', cursive; font-size: 2.5rem; color: var(--accent); margin-bottom: 20px; }
        .btn {
            background: linear-gradient(45deg, #ff0a43, #ff69b4); color: white; border: none; padding: 12px 30px;
            border-radius: 30px; font-weight: bold; margin-top: 20px; cursor: pointer; width: 100%;
            box-shadow: 0 5px 15px rgba(255, 10, 67, 0.4);
        }
        
        /* Grid Layouts */
        .photo-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; }
        .photo-img { width: 100%; height: 120px; background-size: cover; background-position: center; border-radius: 10px; }
        
        .timer-grid { display: grid; grid-template-columns: repeat(4, 1fr); gap: 10px; margin-top:20px; }
        .t-box div:first-child { font-size: 1.5rem; font-weight: bold; color: var(--gold); }
        .t-box div:last-child { font-size: 0.6rem; text-transform: uppercase; opacity: 0.7; }

        .mood-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 10px; }
        .mood-btn { font-size: 2rem; background: rgba(255,255,255,0.05); padding: 10px; border-radius: 10px; cursor: pointer; }

        .bucket-item { text-align: left; padding: 10px; border-bottom: 1px solid rgba(255,255,255,0.1); cursor: pointer; }
        .bucket-item.checked { text-decoration: line-through; color: gray; }

        /* Canvas Draw */
        #draw-canvas { background: white; border-radius: 10px; width: 100%; height: 250px; touch-action: none; cursor: crosshair; }
        
        /* Love Wall Animation inside Modal */
        .wall-container { height: 250px; position: relative; overflow: hidden; background: rgba(0,0,0,0.3); border-radius: 10px; }
        .floating-text { position: absolute; white-space: nowrap; animation: floatUp linear infinite; opacity: 0.8; }
        @keyframes floatUp { from {transform: translateY(250px);} to {transform: translateY(-50px);} }
        @keyframes pulse { 0%, 100% { opacity: 0.5; } 50% { opacity: 1; } }

    </style>
</head>
<body>

    <canvas id="universe"></canvas>

    <div id="ui-layer">
        <div class="reset-view" onclick="resetCamera()">Recenter <i class="fas fa-crosshairs"></i></div>
        <div class="instruction">
            <i class="fas fa-arrows-alt"></i> GLISSEZ POUR EXPLORER L'UNIVERS
        </div>
    </div>

    <div id="modal">
        <div class="modal-card">
            <div class="close-btn" onclick="closeModal()">‚úï</div>
            <div id="modal-content"></div>
        </div>
    </div>

    <script>
        // === DONN√âES DE L'UNIVERS (LES 23 ONGLETS) ===
        // Positionn√©s en spirale ou cercles concentriques
        const nodes = [
            // CENTRE
            { id: 'home', x: 0, y: 0, label: 'DILARA', icon: '‚ù§Ô∏è', size: 50, color: '#ff0a43' },
            
            // CERCLE 1 (Les essentiels)
            { id: 'timer', x: 0, y: -180, label: 'Zaman', icon: '‚è≥', size: 30, color: '#ffd700' },
            { id: 'album', x: 160, y: -80, label: 'Alb√ºm', icon: 'üì∏', size: 30, color: '#00e5ff' },
            { id: 'music', x: 160, y: 80, label: 'M√ºzik', icon: 'üéµ', size: 30, color: '#bd00ff' },
            { id: 'map', x: 0, y: 180, label: 'Yerimiz', icon: 'üìç', size: 30, color: '#ff4757' },
            { id: 'video', x: -160, y: 80, label: 'Video', icon: 'üé¨', size: 30, color: '#ff6b81' },
            { id: 'letters', x: -160, y: -80, label: 'Mektup', icon: 'üíå', size: 30, color: '#ffa502' },

            // CERCLE 2 (Les activit√©s)
            { id: 'quiz', x: 0, y: -350, label: 'Quiz', icon: '‚ùì', size: 25, color: '#fff' },
            { id: 'date', x: 250, y: -250, label: 'Date Idea', icon: 'üé≤', size: 25, color: '#fff' },
            { id: 'pet', x: 350, y: 0, label: 'Panda', icon: 'üêº', size: 25, color: '#fff' },
            { id: 'mood', x: 250, y: 250, label: 'Mood', icon: 'üé≠', size: 25, color: '#fff' },
            { id: 'draw', x: 0, y: 350, label: '√áiz', icon: 'üé®', size: 25, color: '#fff' },
            { id: 'bank', x: -250, y: 250, label: 'Banko', icon: 'üè¶', size: 25, color: '#fff' },
            { id: 'wall', x: -350, y: 0, label: 'Duvar', icon: 'üí¨', size: 25, color: '#fff' },
            { id: 'bucket', x: -250, y: -250, label: 'Hedefler', icon: 'üìù', size: 25, color: '#fff' },

            // CERCLE 3 (Les utilitaires/Extras)
            { id: 'affirmation', x: 150, y: -450, label: 'G√ºnl√ºk', icon: '‚ú®', size: 20, color: '#aaa' },
            { id: 'astro', x: 450, y: -150, label: 'Bur√ß', icon: 'üåü', size: 20, color: '#aaa' },
            { id: 'travel', x: 450, y: 150, label: 'Seyahat', icon: '‚úàÔ∏è', size: 20, color: '#aaa' },
            { id: 'emergency', x: 150, y: 450, label: 'Acil', icon: 'üö®', size: 20, color: '#aaa' },
            { id: 'countdown', x: -150, y: 450, label: 'D√ºƒü√ºn', icon: 'üíç', size: 20, color: '#aaa' },
            { id: 'weather', x: -450, y: 150, label: 'Hava', icon: '‚òÄÔ∏è', size: 20, color: '#aaa' },
            { id: 'secret', x: -450, y: -150, label: 'Gizli', icon: 'üîê', size: 20, color: '#aaa' }
        ];

        // === MOTEUR GRAPHIQUE ===
        const canvas = document.getElementById('universe');
        const ctx = canvas.getContext('2d');
        let width, height, offsetX, offsetY;
        let isDragging = false, startX, startY;
        let stars = [];
        let globalInterval = null; // Pour g√©rer les timers dans les modales

        function init() {
            width = window.innerWidth;
            height = window.innerHeight;
            canvas.width = width;
            canvas.height = height;
            resetCamera();
            // Etoiles fond
            stars = [];
            for(let i=0; i<400; i++) stars.push({x: Math.random()*3000-1500, y: Math.random()*3000-1500, s: Math.random()*2, a: Math.random()});
        }

        function resetCamera() {
            offsetX = width / 2;
            offsetY = height / 2;
        }

        function loop() {
            ctx.fillStyle = '#050510';
            ctx.fillRect(0, 0, width, height);

            // Stars
            ctx.fillStyle = 'white';
            stars.forEach(s => {
                const x = s.x + offsetX * 0.2; // Parallax
                const y = s.y + offsetY * 0.2;
                // Infinite tiling logic simplified
                const dx = (x % 3000 + 3000) % 3000 - 500;
                const dy = (y % 3000 + 3000) % 3000 - 500;
                ctx.globalAlpha = s.a;
                ctx.beginPath(); ctx.arc(dx, dy, s.s, 0, Math.PI*2); ctx.fill();
            });

            // Links
            ctx.strokeStyle = 'rgba(255,255,255,0.1)';
            ctx.lineWidth = 1;
            ctx.beginPath();
            nodes.forEach(n => {
                if (n.id === 'home') return;
                ctx.moveTo(offsetX, offsetY); // Home is always relative 0,0
                ctx.lineTo(n.x + offsetX, n.y + offsetY);
            });
            ctx.stroke();

            // Nodes
            ctx.textAlign = 'center';
            ctx.textBaseline = 'middle';
            nodes.forEach(n => {
                const x = n.x + offsetX;
                const y = n.y + offsetY;
                
                // Glow
                const g = ctx.createRadialGradient(x, y, 0, x, y, n.size*2);
                g.addColorStop(0, n.color); g.addColorStop(1, 'rgba(0,0,0,0)');
                ctx.fillStyle = g; ctx.globalAlpha = 0.3;
                ctx.beginPath(); ctx.arc(x, y, n.size*2, 0, Math.PI*2); ctx.fill();

                // Body
                ctx.globalAlpha = 1;
                ctx.fillStyle = '#1a1a2e';
                ctx.strokeStyle = n.color;
                ctx.lineWidth = 2;
                ctx.beginPath(); ctx.arc(x, y, n.size, 0, Math.PI*2); ctx.fill(); ctx.stroke();

                // Icon & Text
                ctx.fillStyle = 'white';
                ctx.font = `${n.size}px Arial`;
                ctx.fillText(n.icon, x, y);
                ctx.font = '10px Montserrat';
                ctx.fillStyle = '#ccc';
                ctx.fillText(n.label, x, y + n.size + 15);
            });

            requestAnimationFrame(loop);
        }

        // === DRAG & CLICK LOGIC ===
        canvas.addEventListener('mousedown', e => { isDragging=true; startX=e.clientX-offsetX; startY=e.clientY-offsetY; });
        canvas.addEventListener('mousemove', e => { if(isDragging){ offsetX=e.clientX-startX; offsetY=e.clientY-startY; }});
        canvas.addEventListener('mouseup', () => isDragging=false);
        
        canvas.addEventListener('touchstart', e => { isDragging=true; startX=e.touches[0].clientX-offsetX; startY=e.touches[0].clientY-offsetY; });
        canvas.addEventListener('touchmove', e => { if(isDragging){ e.preventDefault(); offsetX=e.touches[0].clientX-startX; offsetY=e.touches[0].clientY-startY; } }, {passive:false});
        canvas.addEventListener('touchend', () => isDragging=false);

        canvas.addEventListener('click', e => {
            if (Math.abs(e.clientX - (startX + offsetX)) > 5) return; // Prevent click on drag
            nodes.forEach(n => {
                const dx = e.clientX - (n.x + offsetX);
                const dy = e.clientY - (n.y + offsetY);
                if (Math.sqrt(dx*dx + dy*dy) < n.size + 10) openModal(n.id);
            });
        });

        // === MODAL CONTENT MANAGER ===
        function openModal(id) {
            const modal = document.getElementById('modal');
            const content = document.getElementById('modal-content');
            clearInterval(globalInterval); // Clean previous intervals

            let html = '';
            
            // --- GENERATION DU CONTENU ---
            if (id === 'home') {
                html = `<h2>Dilara</h2><p>"Tu es le centre de mon univers."</p><div style="font-size:4rem; margin:20px 0;">‚ù§Ô∏è</div>`;
            }
            else if (id === 'timer') {
                html = `<h2>Ge√ßen Zaman</h2><div class="timer-grid">
                        <div class="t-box"><div id="d">0</div><div>Jour</div></div>
                        <div class="t-box"><div id="h">0</div><div>Heure</div></div>
                        <div class="t-box"><div id="m">0</div><div>Min</div></div>
                        <div class="t-box"><div id="s">0</div><div>Sec</div></div>
                        </div>`;
                const start = new Date('2024-11-13T00:00:00').getTime();
                globalInterval = setInterval(() => {
                    const diff = new Date().getTime() - start;
                    if(document.getElementById('d')) {
                        document.getElementById('d').innerText = Math.floor(diff/(1000*60*60*24));
                        document.getElementById('h').innerText = Math.floor((diff%(1000*60*60*24))/(1000*60*60));
                        document.getElementById('m').innerText = Math.floor((diff%(1000*60*60))/(1000*60));
                        document.getElementById('s').innerText = Math.floor((diff%(1000*60))/1000);
                    }
                }, 1000);
            }
            else if (id === 'album') {
                html = `<h2>Alb√ºm</h2><div class="photo-grid">
                    <div class="p-img" style="background-image:url('p1.jpg')"></div>
                    <div class="p-img" style="background-image:url('p2.jpg')"></div>
                    <div class="p-img" style="background-image:url('p3.jpg')"></div>
                    <div class="p-img" style="background-image:url('p4.jpg')"></div>
                </div>`;
            }
            else if (id === 'video') {
                html = `<h2>Video</h2><div style="position:relative; padding-bottom:56.25%; height:0; overflow:hidden; border-radius:10px;">
                <iframe src="https://www.youtube.com/embed/NHTrguAP2Vs" style="position:absolute; top:0; left:0; width:100%; height:100%;" frameborder="0"></iframe></div>`;
            }
            else if (id === 'music') {
                html = `<h2>M√ºzik</h2><div style="text-align:left; background:rgba(255,255,255,0.05); padding:15px; border-radius:10px; margin-bottom:10px;">
                <b>Sadece Dilara</b><br><span style="color:#aaa">Mustafa</span></div>
                <div style="text-align:left; background:rgba(255,255,255,0.05); padding:15px; border-radius:10px;">
                <b>Sonsuz A≈ük</b><br><span style="color:#aaa">Bizimki</span></div>`;
            }
            else if (id === 'map') {
                html = `<h2>Yerimiz</h2><div style="height:150px; background:#333; display:flex; justify-content:center; align-items:center; border-radius:10px;"><i class="fas fa-map-marker-alt" style="font-size:3rem; color:#ff4757;"></i></div>
                <p style="margin-top:15px;">Parking B√©rard, Valserh√¥ne</p>`;
            }
            else if (id === 'bucket') {
                html = `<h2>Hedefler</h2>
                <div class="bucket-item" onclick="this.classList.toggle('checked')">üåç Tour du monde</div>
                <div class="bucket-item" onclick="this.classList.toggle('checked')">üíç Mariage (2026)</div>
                <div class="bucket-item" onclick="this.classList.toggle('checked')">üéà Cappadoce</div>`;
            }
            else if (id === 'letters') {
                html = `<h2>Mektup</h2><div style="display:grid; grid-template-columns:1fr 1fr; gap:10px;">
                <button class="btn" style="margin:0; font-size:0.8rem;" onclick="alert('Je suis l√† pour toi ‚ù§Ô∏è')">Triste üò¢</button>
                <button class="btn" style="margin:0; font-size:0.8rem;" onclick="alert('Tu es mon soleil ‚òÄÔ∏è')">Heureuse üòä</button></div>`;
            }
            else if (id === 'date') {
                html = `<h2>Date Idea</h2><div id="d-res" style="font-size:1.5rem; margin:20px 0;">???</div><button class="btn" onclick="genDate()">G√©n√©rer</button>`;
            }
            else if (id === 'quiz') {
                html = `<h2>Quiz</h2><p>Qui est le plus jaloux ?</p>
                <button class="btn" onclick="alert('Oui c\'est moi üòÖ')">Mustafa</button>
                <button class="btn" onclick="alert('Pas vraiment...')">Dilara</button>`;
            }
            else if (id === 'pet') {
                html = `<h2>Panda</h2><div style="font-size:5rem;" id="p-icon" onclick="feed()">üêº</div><p>Besle beni!</p>
                <div style="width:100%; height:10px; background:#333; margin-top:10px;"><div id="p-bar" style="width:50%; height:100%; background:green;"></div></div>`;
            }
            else if (id === 'draw') {
                html = `<h2>√áiz</h2><canvas id="d-c" style="background:white; width:100%; height:250px; border-radius:10px;"></canvas><button class="btn" onclick="clearD()">Clear</button>`;
            }
            else if (id === 'bank') {
                html = `<h2>Banko</h2><h1 id="b-val" style="color:gold;">1,000,000</h1><button class="btn" onclick="addM()">$$$</button>`;
            }
            else if (id === 'wall') {
                html = `<h2>Duvar</h2><div class="wall-container" id="w-c"></div>`;
            }
            else if (id === 'countdown') {
                html = `<h2>D√ºƒü√ºn</h2><h1 id="w-t" style="color:#ff0a43;">...</h1><p>04.04.2026</p>`;
                const wed = new Date('2026-04-04').getTime();
                globalInterval = setInterval(() => {
                    const l = Math.floor((wed - new Date().getTime()) / (1000*60*60*24));
                    if(document.getElementById('w-t')) document.getElementById('w-t').innerText = l + " Jours";
                }, 1000);
            }
            else if (id === 'secret') {
                html = `<h2>Gizli</h2><input type="password" id="s-in" style="width:100%; padding:10px; border-radius:5px; border:none; text-align:center;" placeholder="Code..."><button class="btn" onclick="checkS()">OK</button>`;
            }
            else {
                html = `<h2>${id}</h2><p>Contenu bient√¥t disponible...</p>`;
            }

            content.innerHTML = html;
            modal.classList.add('active');

            // Post-render Logic (Canvas, Wall, etc.)
            if(id === 'draw') setupDraw();
            if(id === 'wall') setupWall();
        }

        function closeModal() {
            document.getElementById('modal').classList.remove('active');
            clearInterval(globalInterval);
        }

        // === FONCTIONS LOGIQUES ===
        function genDate() { const d=["Sushi","Cin√©","Balade"]; document.getElementById('d-res').innerText = d[Math.floor(Math.random()*d.length)]; }
        let pHealth=50; function feed(){ pHealth=Math.min(100,pHealth+10); document.getElementById('p-bar').style.width=pHealth+'%'; document.getElementById('p-icon').style.transform='scale(1.2)'; setTimeout(()=>document.getElementById('p-icon').style.transform='scale(1)',200); }
        let money=1000000; function addM(){ money+=500; document.getElementById('b-val').innerText=money.toLocaleString(); }
        function checkS(){ if(document.getElementById('s-in').value==='131124') alert('Je t\'aime ‚ù§Ô∏è'); else alert('Non!'); }
        
        function setupWall() {
            const c = document.getElementById('w-c');
            const txts = ["Seni Seviyorum", "I Love You", "Je t'aime"];
            for(let i=0; i<10; i++) {
                let d = document.createElement('div'); d.className='floating-text';
                d.innerText = txts[Math.floor(Math.random()*txts.length)];
                d.style.left = Math.random()*80+'%';
                d.style.animationDuration = (Math.random()*5+5)+'s';
                d.style.color = 'white';
                c.appendChild(d);
            }
        }

        function setupDraw() {
            const cvs = document.getElementById('d-c');
            const cx = cvs.getContext('2d');
            cvs.width = cvs.offsetWidth; cvs.height = cvs.offsetHeight;
            cx.lineWidth=3; cx.strokeStyle='red'; cx.lineCap='round';
            let paint=false;
            function draw(e){
                if(!paint)return; e.preventDefault();
                const rect=cvs.getBoundingClientRect();
                const x=(e.touches?e.touches[0].clientX:e.clientX)-rect.left;
                const y=(e.touches?e.touches[0].clientY:e.clientY)-rect.top;
                cx.lineTo(x,y); cx.stroke(); cx.beginPath(); cx.moveTo(x,y);
            }
            cvs.addEventListener('mousedown', ()=>{paint=true}); cvs.addEventListener('touchstart', ()=>{paint=true});
            cvs.addEventListener('mouseup', ()=>{paint=false;cx.beginPath()}); cvs.addEventListener('touchend', ()=>{paint=false;cx.beginPath()});
            cvs.addEventListener('mousemove', draw); cvs.addEventListener('touchmove', draw);
            window.clearD = function(){ cx.clearRect(0,0,cvs.width,cvs.height); }
        }

        window.addEventListener('resize', init);
        init();
        loop();
    </script>
</body>
</html>
